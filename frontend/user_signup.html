<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Signup</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background-color: #e6f4ea; display: flex; justify-content: center; align-items: center; height: 100vh; }
        .signup-card { padding: 30px; border-radius: 12px; background-color: #d9f0d9; width: 100%; max-width: 450px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
        .signup-card h2 { color: #28a745; text-align: center; margin-bottom: 20px; }
    </style>
</head>
<body>
    <div id="app" class="signup-card">
        <h2>User Signup</h2>
        <form @submit.prevent="signup">
            <div class="mb-3">
                <label for="uid" class="form-label">User ID</label>
                <input type="text" class="form-control" v-model="uid" required>
            </div>
            <div class="mb-3">
                <label for="password" class="form-label">Password</label>
                <input type="password" class="form-control" v-model="password" required>
            </div>
            <div class="mb-3">
                <label for="fname" class="form-label">First Name</label>
                <input type="text" class="form-control" v-model="fname" required>
            </div>
            <div class="mb-3">
                <label for="lname" class="form-label">Last Name</label>
                <input type="text" class="form-control" v-model="lname" required>
            </div>
            <div class="mb-3">
                <label for="age" class="form-label">Age</label>
                <input type="number" class="form-control" v-model="age" required>
            </div>
            <div class="mb-3">
                <label for="mobno" class="form-label">Mobile Number</label>
                <input type="text" class="form-control" v-model="mobno" required>
            </div>
            <div class="mb-3">
                <label for="email" class="form-label">Email</label>
                <input type="email" class="form-control" v-model="email" required>
            </div>
            <button type="submit" class="btn btn-success w-100">Signup</button>
        </form>
        <p class="text-center mt-3">
            <a href="index.html">Back to Home</a>
        </p>
    </div>
    <footer style="
        position: fixed;
        bottom: 0;
        left: 0;
        width: 100%;
        background-color: #0077b6;
        color: white;
        text-align: center;
        padding: 10px 0;
        font-size: 14px;
        box-shadow: 0 -2px 5px rgba(0,0,0,0.1);
    ">
        &copy; 2025 Quickpark
    </footer>

    <script>
        const { createApp } = Vue;
        createApp({
            data() {
                return {
                    uid: '', password: '', fname: '', lname: '', age: '', mobno: '', email: ''
                }
            },
            methods: {
                signup() {
                    fetch("http://127.0.0.1:5000/signup", {
                        method: "POST",
                        headers: { "Content-Type": "application/json" },
                        body: JSON.stringify({
                            uid: this.uid,
                            password: this.password,
                            first_name: this.fname,
                            last_name: this.lname,
                            age: this.age,
                            mob_no: this.mobno,
                            email: this.email
                        })
                    })
                    .then(response => response.json())
                    .then(data => {
                        if (data.error) {
                            alert("❌ " + data.error);
                        } else {
                            alert("✅ " + data.message);
                            window.location.href = "user_login.html";
                        }
                    })
                    .catch(err => {
                        console.error(err);
                        alert("⚠️ Server error. Please try again.");
                    });
                }
            }
        }).mount('#app');
    </script>
</body>
</html>
